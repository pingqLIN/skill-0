{
  "$schema": "../schema/skill-decomposition.schema.json",
  "meta": {
    "skill_id": "claude__composio__raffle_winner_picker",
    "name": "raffle-winner-picker",
    "skill_layer": "claude_skill",
    "title": "Raffle Winner Picker",
    "description": "Picks random winners from lists, spreadsheets, or Google Sheets for giveaways, raffles, and contests. Ensures fair, unbiased selection with transparency.",
    "schema_version": "2.1.0",
    "parse_timestamp": "2026-01-26T05:50:00Z",
    "parser_version": "skill-0 v2.1",
    "parsed_by": "skill-0"
  },
  "original_definition": {
    "source": "ComposioHQ/awesome-claude-skills",
    "skill_name": "raffle-winner-picker",
    "skill_description": "Picks random winners from lists, spreadsheets, or Google Sheets for giveaways, raffles, and contests. Ensures fair, unbiased selection with transparency."
  },
  "decomposition": {
    "actions": [
      {
        "id": "a_001",
        "name": "Identify Data Source",
        "action_type": "llm_inference",
        "description": "Determine if input is Google Sheet URL, local file (CSV/Excel), or inline list",
        "immutable_elements": [
          "source type detection rules"
        ],
        "mutable_elements": [
          "user input",
          "identified source type"
        ],
        "deterministic": false,
        "side_effects": []
      },
      {
        "id": "a_002",
        "name": "Access Google Sheet",
        "action_type": "external_call",
        "description": "Connect to and read data from Google Sheet URL",
        "immutable_elements": [
          "Google Sheets API"
        ],
        "mutable_elements": [
          "sheet URL",
          "raw data"
        ],
        "deterministic": true,
        "side_effects": [
          "external API call"
        ]
      },
      {
        "id": "a_003",
        "name": "Read Local File",
        "action_type": "io_read",
        "description": "Parse CSV, Excel, or other spreadsheet formats from local file",
        "immutable_elements": [
          "file parsing libraries"
        ],
        "mutable_elements": [
          "file path",
          "parsed data"
        ],
        "deterministic": true,
        "side_effects": []
      },
      {
        "id": "a_004",
        "name": "Parse Inline List",
        "action_type": "transform",
        "description": "Extract entries from user-provided inline list",
        "immutable_elements": [
          "list parsing rules"
        ],
        "mutable_elements": [
          "inline text",
          "parsed entries"
        ],
        "deterministic": true,
        "side_effects": []
      },
      {
        "id": "a_005",
        "name": "Apply Exclusions",
        "action_type": "transform",
        "description": "Remove excluded entries (previous winners, ineligible participants)",
        "immutable_elements": [
          "exclusion logic"
        ],
        "mutable_elements": [
          "entry list",
          "exclusion list",
          "filtered entries"
        ],
        "deterministic": true,
        "side_effects": []
      },
      {
        "id": "a_006",
        "name": "Apply Weighting",
        "action_type": "compute",
        "description": "Calculate weighted probabilities if entries have multiple tickets/weights",
        "immutable_elements": [
          "weighting algorithm"
        ],
        "mutable_elements": [
          "entries",
          "weight column",
          "weighted pool"
        ],
        "deterministic": true,
        "side_effects": []
      },
      {
        "id": "a_007",
        "name": "Perform Random Selection",
        "action_type": "compute",
        "description": "Use cryptographically secure random number generation to select winner(s)",
        "immutable_elements": [
          "CSPRNG algorithm"
        ],
        "mutable_elements": [
          "entry pool",
          "winner count",
          "selected winners"
        ],
        "deterministic": false,
        "side_effects": []
      },
      {
        "id": "a_008",
        "name": "Record Selection Metadata",
        "action_type": "state_change",
        "description": "Capture timestamp, selection method, and seed for verification",
        "immutable_elements": [
          "metadata schema"
        ],
        "mutable_elements": [
          "selection event",
          "recorded metadata"
        ],
        "deterministic": true,
        "side_effects": [
          "internal state update"
        ]
      },
      {
        "id": "a_009",
        "name": "Output Winner Details",
        "action_type": "io_write",
        "description": "Display winner information with row number, all relevant fields, and selection metadata",
        "immutable_elements": [
          "output format template"
        ],
        "mutable_elements": [
          "winner data",
          "formatted output"
        ],
        "deterministic": true,
        "side_effects": []
      }
    ],
    "rules": [
      {
        "id": "r_001",
        "name": "Validate Data Source Provided",
        "condition_type": "existence_check",
        "condition_expression": "User provided sheet URL, file, or list",
        "returns": "boolean",
        "fail_action": "branch",
        "branching_targets": [
          "ask for data source"
        ]
      },
      {
        "id": "r_002",
        "name": "Check Entries Exist",
        "condition_type": "existence_check",
        "condition_expression": "Parsed data contains at least 1 entry",
        "returns": "boolean",
        "fail_action": "abort",
        "branching_targets": []
      },
      {
        "id": "r_003",
        "name": "Validate Winner Count",
        "condition_type": "range_check",
        "condition_expression": "Requested winners <= total entries after exclusions",
        "returns": "boolean",
        "fail_action": "branch",
        "branching_targets": [
          "reduce winner count"
        ]
      },
      {
        "id": "r_004",
        "name": "Check No Duplicates",
        "condition_type": "consistency_check",
        "condition_expression": "Selected winners are unique (no duplicate picks)",
        "returns": "boolean",
        "fail_action": "retry",
        "branching_targets": []
      }
    ],
    "directives": [
      {
        "id": "d_001",
        "name": "Winner Selected",
        "directive_type": "completion",
        "description": "Random winner(s) selected with full details and verification metadata",
        "decomposable": true,
        "decomposition_hint": "r_001 → a_001 → [a_002|a_003|a_004] → a_005 → a_006? → r_002 → r_003 → a_007 → r_004 → a_008 → a_009",
        "related_elements": [
          "a_007",
          "a_009"
        ]
      },
      {
        "id": "d_002",
        "name": "Fairness Guarantee",
        "directive_type": "principle",
        "description": "Uses cryptographically secure randomness with no manipulation possible",
        "decomposable": false
      },
      {
        "id": "d_003",
        "name": "Transparency Principle",
        "directive_type": "principle",
        "description": "Document process with timestamp and method for public verification",
        "decomposable": false,
        "related_elements": [
          "a_008"
        ]
      },
      {
        "id": "d_004",
        "name": "Backup Winners Strategy",
        "directive_type": "strategy",
        "description": "Always pick runner-ups in case winner is ineligible",
        "decomposable": false,
        "related_elements": [
          "a_007"
        ]
      },
      {
        "id": "d_005",
        "name": "Privacy Constraint",
        "directive_type": "constraint",
        "description": "Respect data privacy when handling participant information",
        "decomposable": false
      }
    ]
  },
  "execution_paths": [
    {
      "path_id": 1,
      "sequence": [
        "r_001",
        "a_001",
        "a_002",
        "a_005",
        "r_002",
        "r_003",
        "a_007",
        "r_004",
        "a_008",
        "a_009"
      ],
      "condition": "User provides Google Sheet URL",
      "expected_outcome": "Winner selected from Google Sheet"
    },
    {
      "path_id": 2,
      "sequence": [
        "r_001",
        "a_001",
        "a_003",
        "a_005",
        "r_002",
        "r_003",
        "a_007",
        "r_004",
        "a_008",
        "a_009"
      ],
      "condition": "User provides local CSV/Excel file",
      "expected_outcome": "Winner selected from local file"
    },
    {
      "path_id": 3,
      "sequence": [
        "r_001",
        "a_001",
        "a_004",
        "a_005",
        "r_002",
        "r_003",
        "a_007",
        "r_004",
        "a_008",
        "a_009"
      ],
      "condition": "User provides inline list",
      "expected_outcome": "Winner selected from inline list"
    },
    {
      "path_id": 4,
      "sequence": [
        "r_001",
        "a_001",
        "a_002",
        "a_005",
        "a_006",
        "r_002",
        "r_003",
        "a_007",
        "r_004",
        "a_008",
        "a_009"
      ],
      "condition": "User requests weighted selection",
      "expected_outcome": "Winner selected with weighted probability"
    }
  ],
  "parser_meta": {
    "paths_enumerated": 4,
    "max_paths_exceeded": false,
    "max_paths_limit": 100,
    "decomposition_depth": 1,
    "directives_expandable": 1,
    "requires_deep_parse": false,
    "inconsistency_detected": false
  }
}
